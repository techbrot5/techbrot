<!DOCTYPE html>
<html data-bs-theme="light" lang="en" data-bss-forced-theme="light">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>techbrot_inc_QB</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap-icons.css">
    <link rel="stylesheet" href="assets/css/Lato.css">
    <link rel="stylesheet" href="assets/css/swiper-icons.css">
    <link rel="stylesheet" href="assets/css/pricing.css">
    <link rel="stylesheet" href="assets/css/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/vendor/bootstrap-icons/bootstrap-icons.css">
    <link rel="stylesheet" href="assets/css/vendor/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="assets/css/css/main.css">
    <link rel="stylesheet" href="assets/css/style-2.css">
    <link rel="stylesheet" href="assets/css/checkout.css">
    <link rel="stylesheet" href="assets/css/contact-banner.css">
    <link rel="stylesheet" href="assets/css/faq.css">
</head>

<body><style>
.stripe-buy, .btn-buy {
  display: none !important;
  visibility: hidden !important;
  pointer-events: none !important;
}
    
    .pricing-item .btn-cta:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 28px rgb(6 182 212 / .18);
  filter: brightness(.97);
}

.btn-check:checked + .btn, .btn.active, .btn.show, .btn:first-child:active, :not(.btn-check) + .btn:active {
  color: var(--bs-btn-active-color);
  background-color: var(--bs-btn-active-bg);
  border-color: var(--bs-btn-active-border-color);
}

.pricing-item .btn-cta {
  background: linear-gradient(90deg,var(--accent-2),var(--accent));
  color: #fff;
    border: 1px solid var(--accent-2);
  border: none;
  padding: 8px 14px;
  border-radius: 10px;
  font-weight: 700;
  box-shadow: 0 8px 20px rgb(6 182 212 / .15);
  transition: transform .12s ease,box-shadow .12s ease,filter .12s ease;
}


#pricing {
  --tab-accent: #0ea5a4;
  --tab-active-bg: linear-gradient(90deg,#0ea5a4,#06b6d4);
  background: #f9fafc;
  padding: 60px 0;
}

</style>

    <section id="pricing" class="pricing section light-background">
        <div class="container text-center py-4 section-title">
            <p>Plans</p>
            <h2>Pricing Table</h2>
            <p class="text-muted mb-0 small">We don’t just set up your QuickBooks — we keep your books accurate, compliant, and growth-ready.</p>
        </div>
        <div class="container py-4">
            <div class="d-flex justify-content-center mb-4">
                <ul class="nav nav-pills" id="pricingTabs" role="tablist" style="gap:8px;">
                    <li class="nav-item" role="presentation"><button class="active nav-link tab-pill" id="one-time-tab" data-bs-target="#one-time" type="button" role="tab" aria-controls="one-time" aria-selected="true"><span class="tab-label">Launch Packages</span></button></li>
                    <li class="nav-item" role="presentation"><button id="recurring-tab" class="nav-link tab-pill" data-bs-target="#recurring" type="button" role="tab" aria-controls="recurring" aria-selected="false"><span class="tab-label">Growth Subscriptions</span></button></li>
                </ul>
            </div>
            <div class="tab-content">
                <div id="one-time" class="tab-pane fade show active" role="tabpanel" aria-labelledby="one-time-tab">
                    <form id="addonCheckoutForm" action="/checkout" method="POST" style="display:none;"><input type="hidden" id="checkout_payload" name="cart_json" value=""></form>
                    <div class="row g-4">
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="card h-100 pricing-item">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="mb-0 card-title">All-in-One Setup &amp; Onboarding</h5>
                                    </div>
                                    <p class="text-muted mb-2">Quick, complete QuickBooks setup with optional training.</p>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-baseline gap-2">
                                            <div class="fs-3 fw-bold"><span>$199</span><span class="fs-6 text-muted">/one-time</span></div>
                                        </div>
                                        <div class="text-muted mt-1 small"><span>For 1 user + accountant access</span></div>
                                    </div>
                                    <div class="mb-3" style="text-align:left;">
                                        <div class="form-check form-check-inline"><input type="radio" checked="" class="form-check-input setup-tier billing-choice" data-price="199" id="setup_basic_radio" name="setup_tier_setup" value="Basic"><label class="form-check-label small" for="setup_basic_radio"><strong>$199</strong> — Basic Setup&nbsp;</label></div>
                                        <div class="form-check form-check-inline"><input type="radio" class="form-check-input setup-tier billing-choice" data-price="399" id="setup_premium_radio" name="setup_tier_setup" value="Premium"><label class="form-check-label small" for="setup_premium_radio"><strong>$399</strong> — Premium Setup&nbsp;</label></div>
                                    </div>
                                    <div class="mb-3 btn-wrap"><button class="btn btn-sm btn-buy stripe-buy" type="button" data-product-id="setup" data-product-name="All-in-One Setup &amp; Onboarding" data-price-key-monthly="setup_basic_one_time_PLACEHOLDER" data-price-key-annual="setup_basic_one_time_PLACEHOLDER" data-price-monthly="199" data-price-annual="199" data-quantity="1" aria-label="Buy Setup"> Buy Now </button><button class="btn btn-outline-primary btn-sm btn-cta" type="button" data-product="All-in-One Setup &amp; Onboarding" data-price="199" data-billing="one-time" data-single="true"> Add to cart </button></div>
                                    <ul class="list-unstyled mb-4 small service-list">
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Chart of accounts, sales tax &amp; invoices</span></li>
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Bank feeds &amp; opening balances</span></li>
                                        <li class="d-flex align-items-start"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>1–2 live training sessions</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="card h-100 pricing-item">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="mb-0 card-title">Cleanup &amp; Catch-Up</h5>
                                    </div>
                                    <p class="text-muted mb-2">Fix historical issues, review past transactions, and correct categorization.</p>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-baseline gap-2">
                                            <div class="fs-3 fw-bold"><span>$250</span><span class="fs-6 text-muted">/one-time</span></div>
                                        </div>
                                        <div class="text-muted mt-1 small"><span>For up to 3 users + accountant access</span></div>
                                    </div>
                                    <div class="mb-3" style="text-align:left;">
                                        <div class="form-check form-check-inline"><input type="radio" checked="" class="form-check-input cleanup-option billing-choice" data-price="250" id="cleanup_3_radio_new" name="cleanup_months_new" value="3 months"><label class="form-check-label small" for="cleanup_3_radio_new"><strong>$250</strong> —&nbsp;Lite Cleanup</label></div>
                                        <div class="form-check form-check-inline"><input type="radio" class="form-check-input cleanup-option billing-choice" data-price="450" id="cleanup_6_radio_new" name="cleanup_months_new" value="6 months"><label class="form-check-label small" for="cleanup_6_radio_new"><strong>$450</strong> —&nbsp;Standard Catch-Up</label></div>
                                    </div>
                                    <div class="mb-3 btn-wrap"><button class="btn btn-sm btn-buy stripe-buy" type="button" data-product-id="cleanup" data-product-name="Cleanup &amp; Catch-Up" data-price-key-monthly="cleanup_3_one_time_PLACEHOLDER" data-price-key-annual="cleanup_3_one_time_PLACEHOLDER" data-price-monthly="250" data-price-annual="250" data-quantity="1"> Buy Now </button><button class="btn btn-outline-primary btn-sm btn-cta" type="button" data-product="Cleanup &amp; Catch-Up" data-price="250" data-billing="one-time" data-single="true" style="border: 1px solid var(--accent-2);"> Add to cart </button></div>
                                    <ul class="list-unstyled mb-4 small service-list">
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>3–12 months review</span></li>
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Reconciliations &amp; corrections</span></li>
                                        <li class="d-flex align-items-start"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Reporting package with before/after summary</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="card h-100 pricing-item">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="mb-0 card-title">Migration Service</h5>
                                    </div>
                                    <p class="text-muted mb-2">Migrate from Excel, Xero, or Desktop, map &amp; verify data, and ensure an accurate transition.</p>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-baseline gap-2">
                                            <div class="fs-3 fw-bold"><span>$399</span><span class="fs-6 text-muted">/one-time</span></div>
                                        </div>
                                        <div class="text-muted mt-1 small"><span>For up to 5 users + accountant access</span></div>
                                    </div>
                                    <div class="mb-3" style="text-align:left;">
                                        <div class="form-check form-check-inline"><input type="radio" checked="" class="form-check-input migration-tier billing-choice" data-price="399" id="migration_basic_radio_new" name="migration_tier_new" value="Basic"><label class="form-check-label small" for="migration_basic_radio_new"><strong>$399</strong> — Basic Migration&nbsp;</label></div>
                                        <div class="form-check form-check-inline"><input type="radio" class="form-check-input migration-tier billing-choice" data-price="799" id="migration_full_radio_new" name="migration_tier_new" value="Full"><label class="form-check-label small" for="migration_full_radio_new"><strong>$599</strong> — Standard Migration&nbsp;</label></div>
                                    </div>
                                    <div class="mb-3 btn-wrap"><button class="btn btn-sm btn-buy stripe-buy" type="button" data-product-id="migration" data-product-name="Migration Service" data-price-key-monthly="migration_basic_one_time_PLACEHOLDER" data-price-key-annual="migration_basic_one_time_PLACEHOLDER" data-price-monthly="399" data-price-annual="399" data-quantity="1"> Buy Now </button><button class="btn btn-outline-primary btn-sm btn-cta" type="button" data-product="Migration Service" data-price="399" data-billing="one-time" data-single="true"> Add to cart </button></div>
                                    <ul class="list-unstyled mb-4 small service-list">
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Data mapping &amp; verification</span></li>
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Reconciliation testing</span></li>
                                        <li class="d-flex align-items-start"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Onboarding support &amp; walkthrough</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="card h-100 pricing-item recommended">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="mb-0 card-title">QuickStart — Sessions</h5>
                                    </div>
                                    <p class="text-muted mb-2">Hourly sessions for personalized support, workflow setup, and automation efficiency.</p>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-baseline gap-2">
                                            <div class="fs-3 fw-bold"><span>$99</span><span class="fs-6 text-muted">/hour</span></div>
                                        </div>
                                        <div class="text-muted mt-1 small"><span>For up to 25 users + accountant access</span></div>
                                    </div>
                                    <div class="mb-3" style="text-align:left;">
                                        <div class="form-check form-check-inline"><input type="radio" checked="" class="form-check-input training-tier billing-choice" data-price="99" data-unit="/hour" id="quickstart_session_radio_new" name="training_tier_new" value="QuickStart Session"><label class="form-check-label small" for="quickstart_session_radio_new"><strong>$99</strong> — Single Session&nbsp;</label></div>
                                        <div class="form-check form-check-inline"><input type="radio" class="form-check-input training-tier billing-choice" data-price="199" id="workflow_pack_radio_new" name="training_tier_new" value="Workflow Pack"><label class="form-check-label small" for="workflow_pack_radio_new"><strong>$199 </strong>— Workflow Pack&nbsp;</label></div>
                                    </div>
                                    <div class="mb-3 btn-wrap"><button class="btn btn-sm btn-buy stripe-buy" type="button" data-product-id="quickstart" data-product-name="QuickStart — Sessions &amp; Optimization" data-price-key-monthly="quickstart_session_one_time_PLACEHOLDER" data-price-key-annual="quickstart_session_one_time_PLACEHOLDER" data-price-monthly="99" data-price-annual="99" data-quantity="1"> Buy Now </button><button class="btn btn-outline-primary btn-sm btn-cta" type="button" data-product="QuickStart — Sessions &amp; Optimization" data-price="99" data-billing="one-time" data-single="false"> Add to cart </button></div>
                                    <ul class="list-unstyled mb-4 small service-list">
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Connect banks &amp; apps</span></li>
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Workflow &amp; automation recommendations</span></li>
                                        <li class="d-flex align-items-start"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>30-min follow-up &amp; checklist</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="recurring" class="tab-pane fade" role="tabpanel" aria-labelledby="recurring-tab">
                    <div class="row g-4">
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="card h-100 pricing-item recommended" data-plan="Essential Care" data-monthly="149" data-single="true">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="mb-0 card-title">Essential Care</h5>
                                    </div>
                                    <p class="text-muted mb-2">Light bookkeeping + review.</p>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-baseline gap-2">
                                            <div class="fs-3 fw-bold"><span>$149</span><span class="fs-6 text-muted">/month</span></div>
                                        </div>
                                    </div>
                                    <div class="text-muted mb-3 small">
                                        <div class="annual-calc"><span>Annual (12×): </span><strong>$1,788.00</strong></div>
                                        <div class="discount-line"><span>Limited 30% off — Pay </span><strong>$1,251.60</strong></div>
                                    </div>
                                    <div class="mb-3" style="text-align:left;">
                                        <div class="form-check form-check-inline"><input type="radio" checked="" class="form-check-input billing-toggle billing-choice" id="essential_tier_standard" name="tier_essential" value="standard"><label class="form-check-label small" for="essential_tier_standard"><strong>$149 — Standard&nbsp;</strong></label></div>
                                        <div class="form-check form-check-inline"><input type="radio" class="form-check-input billing-toggle billing-choice" id="essential_tier_plus" name="tier_essential" value="plus"><label class="form-check-label small" for="essential_tier_plus">$199 — Plus</label></div>
                                    </div>
                                    <div class="mb-3 btn-wrap"><button class="btn btn-sm btn-buy stripe-buy" type="button" data-product-id="essential_care" data-product-name="Essential Care" data-price-key-monthly="essential_care_monthly_PLACEHOLDER" data-price-key-annual="essential_care_annual_PLACEHOLDER" data-price-monthly="149" data-price-annual="1251.60" data-quantity="1" aria-label="Buy Essential Care"> Buy Now </button><button class="btn btn-outline-primary btn-sm btn-cta" type="button" data-product="Essential Care" data-billing="monthly" data-price="149" data-single="true"> Add to cart </button></div>
                                    <ul class="list-unstyled mb-0 small service-list">
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Monthly reconciliation</span></li>
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Error fixing &amp; email support</span></li>
                                        <li class="d-flex align-items-start"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>15-min quarterly check-in</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="card h-100 pricing-item" data-plan="Growth Care" data-monthly="299" data-single="true">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="mb-0 card-title">Growth Care</h5>
                                    </div>
                                    <p class="text-muted mb-2">Full bookkeeping &amp; reporting.</p>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-baseline gap-2">
                                            <div class="fs-3 fw-bold"><span>$299</span><span class="fs-6 text-muted">/month</span></div>
                                        </div>
                                    </div>
                                    <div class="text-muted mb-3 small">
                                        <div class="annual-calc"><span>Annual (12×): </span><strong>$3,588.00</strong></div>
                                        <div class="discount-line"><span>Limited 30% off — Pay </span><strong>$2,511.60</strong></div>
                                    </div>
                                    <div class="mb-3" style="text-align:left;">
                                        <div class="form-check form-check-inline"><input type="radio" checked="" class="form-check-input billing-toggle billing-choice" id="growth_tier_standard" name="tier_growth" value="standard"><label class="form-check-label small" for="growth_tier_standard"><strong>$299 — Standard&nbsp;</strong></label></div>
                                        <div class="form-check form-check-inline"><input type="radio" class="form-check-input billing-toggle billing-choice" id="growth_tier_premium" name="tier_growth" value="premium"><label class="form-check-label small" for="growth_tier_premium"><strong>$399 — Premium</strong></label></div>
                                    </div>
                                    <div class="mb-3 btn-wrap"><button class="btn btn-sm btn-buy stripe-buy" type="button" data-product-id="growth_care" data-product-name="Growth Care" data-price-key-monthly="growth_care_monthly_PLACEHOLDER" data-price-key-annual="growth_care_annual_PLACEHOLDER" data-price-monthly="299" data-price-annual="2511.60" data-quantity="1" aria-label="Buy Growth Care"> Buy Now </button><button class="btn btn-outline-primary btn-sm btn-cta" type="button" data-product="Growth Care" data-billing="monthly" data-price="299" data-single="true"> Add to cart </button></div>
                                    <ul class="list-unstyled mb-0 small service-list">
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Weekly categorization</span></li>
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Monthly reports &amp; analysis</span></li>
                                        <li class="d-flex align-items-start"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Monthly review call</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="card h-100 pricing-item" data-plan="Premium Care" data-monthly="599" data-single="true">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="mb-0 card-title">Premium Care</h5>
                                    </div>
                                    <p class="text-muted mb-2">Support &amp; custom dashboards.</p>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-baseline gap-2">
                                            <div class="fs-3 fw-bold"><span>$599</span><span class="fs-6 text-muted">/month</span></div>
                                        </div>
                                    </div>
                                    <div class="text-muted mb-3 small">
                                        <div class="annual-calc"><span>Annual (12×): </span><strong>$7,188.00</strong></div>
                                        <div class="discount-line"><span>Limited 30% off — Pay </span><strong>$5,031.60</strong></div>
                                    </div>
                                    <div class="mb-3" style="text-align:left;">
                                        <div class="form-check form-check-inline"><input type="radio" checked="" class="form-check-input billing-toggle billing-choice" id="premium_tier_standard" name="tier_premium" value="standard"><label class="form-check-label small" for="premium_tier_standard"><strong>$599 — Standard&nbsp;</strong></label></div>
                                        <div class="form-check form-check-inline"><input type="radio" class="form-check-input billing-toggle billing-choice" id="premium_tier_plus" name="tier_premium" value="plus"><label class="form-check-label small" for="premium_tier_plus"><strong>$799 — Plus</strong></label></div>
                                    </div>
                                    <div class="mb-3 btn-wrap"><button class="btn btn-sm btn-buy stripe-buy" type="button" data-product-id="premium_care" data-product-name="Premium Care" data-price-key-monthly="premium_care_monthly_PLACEHOLDER" data-price-key-annual="premium_care_annual_PLACEHOLDER" data-price-monthly="599" data-price-annual="5031.60" data-quantity="1" aria-label="Buy Premium Care"> Buy Now </button><button class="btn btn-outline-primary btn-sm btn-cta" type="button" data-product="Premium Care" data-billing="monthly" data-price="599" data-single="true"> Add to cart </button></div>
                                    <ul class="list-unstyled mb-0 small service-list">
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Everything in Growth Care</span></li>
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Payroll &amp; dashboard setup</span></li>
                                        <li class="d-flex align-items-start"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Quarterly performance call</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="card h-100 pricing-item" data-plan="CFO Lite" data-monthly="999" data-single="true">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="mb-0 card-title">CFO Lite</h5>
                                    </div>
                                    <p class="text-muted mb-2">Advanced financial strategy</p>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-baseline gap-2">
                                            <div class="fs-3 fw-bold"><span>$999</span><span class="fs-6 text-muted">/month</span></div>
                                        </div>
                                    </div>
                                    <div class="text-muted mb-3 small">
                                        <div class="annual-calc"><span>Annual (12×): </span><strong>$11,988.00</strong></div>
                                        <div class="discount-line"><span>30% off — Pay </span><strong>$8,391.60</strong></div>
                                    </div>
                                    <div class="mb-3" style="text-align:left;">
                                        <div class="form-check form-check-inline"><input type="radio" checked="" class="form-check-input billing-toggle billing-choice" id="cfo_tier_standard" name="tier_cfo" value="standard"><label class="form-check-label small" for="cfo_tier_standard">$999 — Standard&nbsp;</label></div>
                                        <div class="form-check form-check-inline"><input type="radio" class="form-check-input billing-toggle billing-choice" id="cfo_tier_enterprise" name="tier_cfo" value="enterprise"><label class="form-check-label small" for="cfo_tier_enterprise"><strong>$1,499 — Enterprise</strong></label></div>
                                    </div>
                                    <div class="mb-3 btn-wrap"><button class="btn btn-sm btn-buy stripe-buy" type="button" data-product-id="cfo_lite" data-product-name="CFO Lite" data-price-key-monthly="cfo_lite_monthly_PLACEHOLDER" data-price-key-annual="cfo_lite_annual_PLACEHOLDER" data-price-monthly="999" data-price-annual="8391.60" data-quantity="1" aria-label="Buy CFO Lite"> Buy Now </button><button class="btn btn-outline-primary btn-sm btn-cta" type="button" data-product="CFO Lite" data-billing="monthly" data-price="999" data-single="true"> Add to cart </button></div>
                                    <ul class="list-unstyled mb-0 small service-list">
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Everything in Premium Care</span></li>
                                        <li class="d-flex align-items-start mb-2"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>Budgeting &amp; forecasting</span></li>
                                        <li class="d-flex align-items-start"><svg class="unique-pricing-check me-2" viewbox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z" fill="currentColor"></path></svg><span>KPI tracking &amp; strategic monthly session</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center text-muted mt-3 small"><span>Annual prepayment discounts: </span><strong>10–30% off</strong><span>.</span></div>
                </div>
            </div><div id="cartPanel" style="position: fixed; right: 16px; top: 16px; width: 360px; max-width: calc(100% - 32px); max-height: 62vh; overflow-y: auto; background: #fff; border-radius: 8px; box-shadow: 0 6px 18px rgba(0,0,0,0.12); padding: 12px; z-index: 1200;">
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
    <strong>Cart</strong>
    <div>
      <button id="clearCartBtn" class="btn btn-outline-secondary btn-sm" type="button">Clear</button>
      <button id="checkoutBtn" class="btn btn-primary btn-sm" type="button">Checkout</button>
    </div>
  </div>
  <div id="cartSummary" style="font-size:13px; color:#333;"></div>
</div>

        </div>
    </section><script>
/* combined-cart-ui.fixed.js — Cart + Stripe checkout + UI/price helpers
   - Keep your original API surface but make DOM-safe, add animations, toasts, small UX fixes.
*/
(function () {
  'use strict';

  // ---------- Small feature flags ----------
  const ENABLE_TOASTS = true; // set false to disable toast helper
  const CHECKOUT_ENDPOINTS = ['/api/create-checkout-session', '/create-checkout-session', '/create-checkout-session.php'];

  // ---------- Utilities ----------
  function qs(sel, ctx) { try { return (ctx || document).querySelector(sel); } catch (e) { return null; } }
  function qsa(sel, ctx) { try { return Array.from((ctx || document).querySelectorAll(sel)); } catch (e) { return []; } }
  function formatNumber(n) { return Number(n || 0).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }); }
  function escapeHtml(s) { return String(s || '').replace(/[&<>"']/g, function (m) { return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]; }); }
  function extractPriceFromText(txt) {
    if (!txt) return null;
    const m = String(txt).replace(/\u00A0/g,' ').match(/([0-9]+(?:[.,][0-9]+)?)/);
    if (!m) return null;
    return parseFloat(m[1].replace(/,/g,'')) || null;
  }
  function safeAnimate(el, keyframes, options) {
    if (!el || !el.animate) return null;
    try { return el.animate(keyframes, options); } catch (e) { return null; }
  }

  // ---------- Toast helper (compact) ----------
  let _toastContainer = null;
  function ensureToastContainer() {
    if (!ENABLE_TOASTS) return null;
    if (_toastContainer) return _toastContainer;
    _toastContainer = document.createElement('div');
    _toastContainer.className = 'cart-toast-container';
    // minimal inline style to be safe (you likely will style in CSS)
    Object.assign(_toastContainer.style, {
      position: 'fixed',
      right: '16px',
      top: '16px',
      zIndex: 99999,
      display: 'flex',
      flexDirection: 'column',
      gap: '8px',
      pointerEvents: 'none'
    });
    document.body.appendChild(_toastContainer);
    return _toastContainer;
  }
  function createToast(message, opts) {
    if (!ENABLE_TOASTS) return;
    const c = ensureToastContainer();
    if (!c) return;
    const toast = document.createElement('div');
    toast.className = 'cart-toast';
    toast.setAttribute('role','status');
    toast.textContent = String(message || '');
    Object.assign(toast.style, {
      pointerEvents: 'auto',
      background: 'rgba(0,0,0,0.78)',
      color: '#fff',
      padding: '8px 12px',
      borderRadius: '8px',
      fontSize: '13px',
      boxShadow: '0 6px 18px rgba(0,0,0,0.15)',
      transformOrigin: 'right top',
      maxWidth: '320px'
    });
    c.appendChild(toast);
    safeAnimate(toast, [{ opacity: 0, transform: 'translateY(-6px) scale(.98)'}, { opacity: 1, transform: 'translateY(0) scale(1)' }], { duration: 220, easing: 'cubic-bezier(.2,.8,.2,1)' });
    const duration = (opts && opts.duration) ? opts.duration : 3000;
    setTimeout(() => {
      const anim = safeAnimate(toast, [{ opacity: 1, transform: 'translateY(0) scale(1)'}, { opacity: 0, transform: 'translateY(-6px) scale(.98)'}], { duration: 220, easing: 'ease-in' });
      if (anim && anim.finished) anim.finished.then(() => toast.remove()).catch(()=>toast.remove());
      else setTimeout(() => toast.remove(), 260);
    }, duration);
  }

  // ---------- Cart storage ----------
  const CART_KEY = 'pricing_cart';
  function readCart() {
    try { const raw = localStorage.getItem(CART_KEY); return raw ? JSON.parse(raw) : []; } catch (e) { console.warn('Failed to parse cart', e); return []; }
  }
  function writeCart(items) {
    try { localStorage.setItem(CART_KEY, JSON.stringify(items || [])); } catch(e){ console.warn('Failed to save cart', e); }
    renderCartSummary();
    // notify UI sync
    if (typeof window.syncCardsWithCart === 'function') window.syncCardsWithCart();
  }

  function productMatches(a, b) {
    return (String(a.product || '')).trim().toLowerCase() === (String(b.product || '')).trim().toLowerCase();
  }

  // ---------- Render cart summary ----------
  function renderCartSummary() {
    const cart = readCart();
    const el = document.getElementById('cartSummary');
    if (!el) return;
    // Ensure container visible if we have a panel
    const panel = document.getElementById('cartPanel'); if (panel) panel.style.display = '';

    // Empty state
    if (!cart || cart.length === 0) {
      el.innerHTML = '<div class="cart-empty" style="color:#666; padding:12px;">Your cart is empty. Add a plan or one-time item to proceed to checkout.</div>';
      return;
    }

    let html = '';
    let total = 0;

    cart.forEach((it, i) => {
      const priceVal = Number(it.price || 0);
      const qty = Number(it.quantity || 1);
      const line = priceVal * qty;
      total += line;
      const isRecurring = ['monthly','annual'].includes(String((it.billing || '').toLowerCase()));
      const isSingle = !!it.single;
      const allowQtyChange = !isRecurring && !isSingle;

      html +=
        '<div class="cart-item" data-cart-index="'+i+'" style="display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 8px; border-bottom:1px solid rgba(0,0,0,0.04);">' +
          '<div class="meta" style="flex:1; min-width:0;">' +
            `<div class="product-title" style="font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">${escapeHtml(it.product)}</div>` +
            `<div class="meta-line" style="font-size:13px; color:#666;">${escapeHtml(it.option || '')}${it.billing ? ' · ' + escapeHtml(it.billing) : ''}</div>` +
            `<div class="price-line" style="font-size:13px; margin-top:6px;">$${formatNumber(priceVal)} × ${qty} = <strong>$${formatNumber(line)}</strong></div>` +
          '</div>' +
          '<div class="controls" style="display:flex; align-items:center; gap:8px; margin-left:8px;">' +
            (allowQtyChange
              ? `<div class="cart-qty-controls" style="display:flex; gap:6px; align-items:center;">` +
                  `<button type="button" data-idx="${i}" data-op="inc" class="btn-qty" aria-label="Increase quantity" style="min-width:34px; height:32px; border-radius:6px;">+</button>` +
                  `<button type="button" data-idx="${i}" data-op="dec" class="btn-qty btn-qty--minus" aria-label="Decrease quantity" style="min-width:34px; height:32px; border-radius:6px;">–</button>` +
                `</div>`
              : `<div class="cart-qty-controls" style="width:68px; text-align:center;"><button disabled style="opacity:.5; width:68px; height:32px; border-radius:6px;">Qty</button></div>`) +
            `<button type="button" data-idx="${i}" class="btn-remove" aria-label="Remove ${escapeHtml(it.product)}" style="height:32px; border-radius:6px;">Remove</button>` +
          '</div>' +
        '</div>';
    });

    html += `<div style="margin-top:8px; font-weight:700; text-align:right; padding:8px 0;">Total: $${formatNumber(total)}</div>`;
    el.innerHTML = html;

    // wire up qty/remove button listeners in a safe delegated manner (to avoid inline onclick problems)
    qsa('.btn-qty', el).forEach(b => {
      b.removeEventListener('click', qtyClickHandler);
      b.addEventListener('click', qtyClickHandler);
    });
    qsa('.btn-remove', el).forEach(b => {
      b.removeEventListener('click', removeClickHandler);
      b.addEventListener('click', removeClickHandler);
    });

    // Softly animate list update
    try {
      const firstItem = el.querySelector('.cart-item');
      if (firstItem) safeAnimate(firstItem, [{ transform: 'translateY(6px)', opacity: 0 }, { transform: 'translateY(0)', opacity: 1 }], { duration: 220, easing: 'cubic-bezier(.2,.8,.2,1)' });
    } catch (e) {}
  }

  // expose renderer
  window.renderCartSummary = renderCartSummary;

  function qtyClickHandler(ev) {
    const btn = ev.currentTarget;
    const idx = Number(btn.dataset.idx);
    const op = btn.dataset.op;
    if (Number.isNaN(idx)) return;
    if (op === 'inc') window.changeQty(idx, 1);
    else if (op === 'dec') window.changeQty(idx, -1);
  }
  function removeClickHandler(ev) {
    const btn = ev.currentTarget;
    const idx = Number(btn.dataset.idx);
    if (Number.isNaN(idx)) return;
    removeCartItem(idx);
    createToast('Removed item from cart', { duration: 1800 });
  }

  // ---------- Cart operations ----------
  function addToCart(item) {
    const cart = readCart();
    const singleFlag = !!item.single;
    const sameIndex = cart.findIndex(ci => productMatches(ci, item));

    if (sameIndex > -1) {
      const existing = cart[sameIndex];

      // If single or recurring item, do not add duplicates
      const isRecurring = ['monthly','annual'].includes(String((existing.billing || '').toLowerCase()));
      if (singleFlag || existing.single || isRecurring) {
        createToast(`"${existing.product}" can only be added once. Remove it first to change selection.`, { duration: 3000 });
        return false;
      }

      // For one-time, add quantities instead of replacing
      existing.quantity = (existing.quantity || 1) + (item.quantity || 1);
      writeCart(cart);
      return true;
    }

    // New item — allow adding freely
    if (['monthly','annual'].includes(String((item.billing || '').toLowerCase()))) {
      item.quantity = 1;
      item.single = true;
    }
    if (singleFlag) item.quantity = 1;

    cart.push(Object.assign({ quantity: item.quantity || 1 }, item));
    writeCart(cart);
    return true;
  }

  function removeCartItem(index) {
    const cart = readCart();
    if (index >= 0 && index < cart.length) { cart.splice(index, 1); writeCart(cart); }
  }
  function clearCart() { try { localStorage.removeItem(CART_KEY); } catch(e){} renderCartSummary(); if (typeof window.syncCardsWithCart === 'function') window.syncCardsWithCart(); }

  // expose
  window.removeCartItem = removeCartItem;
  window.clearCart = clearCart;

  window.changeQty = function(index, delta) {
    const cart = readCart();
    if (!cart[index]) return;
    const item = cart[index];
    const isRecurring = ['monthly','annual'].includes(String((item.billing || '').toLowerCase()));
    const isSingle = !!item.single;
    if (isRecurring || isSingle) { createToast('Quantity cannot be changed for this item. Remove it if you want to change selection.', { duration: 2600 }); return; }
    const newQty = Math.max(0, (item.quantity || 1) + delta);
    if (newQty === 0) cart.splice(index, 1); else cart[index].quantity = newQty;
    writeCart(cart);
  };

  // ---------- Add-to-cart entrypoint (called by buttons) ----------
  window.addToCartFromCard = function (btn) {
    if (!btn) return;
    const el = btn.closest('.pricing-item') || btn.closest('.card') || document;
    const product = btn.dataset.product || btn.getAttribute('data-product') || btn.dataset.addon || (el && el.dataset.product) || (el && el.dataset.plan) || '';
    let price = btn.dataset.price || btn.getAttribute('data-price') || (el && el.dataset.price) || (el && el.dataset.monthly) || '';
    let billing = btn.dataset.billing || btn.getAttribute('data-billing') || (el && el.dataset.billing) || 'one-time';
    let option = '';

    const singleAttr = (btn.dataset.single || (el && el.dataset.single));
    const single = (singleAttr === 'true' || (el && el.dataset.single === 'true'));

    const lower = (product || '').toLowerCase();
    try {
      if (lower.includes('setup') && qs('.setup-tier:checked', el)) {
        const sel = qs('.setup-tier:checked', el); option = sel.value; price = sel.dataset.price;
      } else if (lower.includes('cleanup') && qs('.cleanup-option:checked', el)) {
        const sel = qs('.cleanup-option:checked', el); option = sel.value; price = sel.dataset.price;
      } else if (lower.includes('migration') && qs('.migration-tier:checked', el)) {
        const sel = qs('.migration-tier:checked', el); option = sel.value; price = sel.dataset.price;
      } else if (lower.includes('quickstart') && qs('.training-tier:checked', el)) {
        const sel = qs('.training-tier:checked', el); option = sel.value; price = sel.dataset.price;
      } else if (btn.dataset.billing) {
        const card = el.closest('.pricing-item') || el;
        const billingRadio = qs('input[type="radio"]:checked', card) || qs('.billing-toggle:checked', card);
        if (billingRadio) {
          const b = billingRadio.value; billing = b;
          if (billingRadio.dataset && billingRadio.dataset.price) price = billingRadio.dataset.price;
          else {
            const lab = billingRadio.id ? card.querySelector('label[for="' + CSS.escape(billingRadio.id) + '"]') : null;
            const txt = (lab && lab.textContent) ? lab.textContent : (billingRadio.closest('.form-check') ? billingRadio.closest('.form-check').textContent : '');
            const m = txt && txt.match(/([0-9]+(?:[.,][0-9]+)?)/);
            if (m) price = m[1].replace(/,/g,'');
          }
          option = (b === 'annual') ? 'Annual' : 'Monthly';
          if (b === 'annual' && btn.dataset.annualDiscount) {
            const d = btn.dataset.annualDiscount;
            const mm = d && d.match ? d.match(/([0-9]+(?:[.,][0-9]+)?)/) : null;
            if (mm) price = mm[1].replace(/,/g,'');
          }
        }
      }
    } catch (err) { console.warn('addToCartFromCard selection parse error', err); }

    price = String(price || '').trim();
    const item = {
      product: product || 'Unknown product',
      option: option || '',
      price: parseFloat(price) || 0,
      billing: billing || '',
      single: !!single,
      addedAt: new Date().toISOString(),
      quantity: 1
    };

    const added = addToCart(item);
    if (added) {
      // visual pop on the card
      try {
        const card = btn.closest('.pricing-item') || btn.closest('.card');
        if (card) safeAnimate(card, [{ transform: 'scale(.98)' }, { transform: 'scale(1.03)' }, { transform: 'scale(1)' }], { duration: 260, easing: 'cubic-bezier(.2,.8,.2,1)' });
      } catch (e) {}
      // button micro-feedback
      try { btn.animate([{ transform: 'translateY(0)' }, { transform: 'translateY(-2px)' }, { transform: 'translateY(0)' }], { duration: 220, easing: 'ease-out' }); } catch(e) {}
      // optional toast
      createToast(`${item.product} added to cart`, { duration: 1600 });
      // temporary label change for visual feedback
      const priorText = (btn.innerText || btn.textContent || '').trim();
      try {
        btn.disabled = true;
        btn.dataset._prevText = priorText;
        btn.textContent = 'Added ✓';
        setTimeout(() => {
          try {
            if (btn.dataset._prevText) btn.textContent = btn.dataset._prevText;
            btn.disabled = false;
            delete btn.dataset._prevText;
          } catch(e){}
        }, 1200);
      } catch (e) { console.warn('btn label swap failed', e); }
      // let card-level logic mark buttons disabled
      if (typeof window.markCardAdded === 'function') window.markCardAdded(item.product);
    }
  };

  // ---------- Delegated .btn-cta handler (keeps your markup logic) ----------
  document.addEventListener('click', function (ev) {
    const b = ev.target.closest ? ev.target.closest('.btn-cta') : null;
    if (!b) return;
    ev.preventDefault();
    if (window.addToCartFromCard) window.addToCartFromCard(b);
  }, { passive: false });

  // ---------- Import saved plans ----------
  (function importSavedPlans() {
    const SAVED_KEY = 'service_plans_cart';
    try {
      const raw = localStorage.getItem(SAVED_KEY);
      if (!raw) return;
      let saved = JSON.parse(raw);
      if (!Array.isArray(saved)) saved = (saved && typeof saved === 'object') ? [saved] : [];
      if (!saved.length) { localStorage.removeItem(SAVED_KEY); return; }
      saved.forEach(s => {
        try {
          const productName = s.productName || s.product || s.productId || s.name || '';
          const billing = s.billing || (s.option === 'Annual' ? 'annual' : (s.option === 'Monthly' ? 'monthly' : (s.priceKey && String(s.priceKey).toLowerCase().includes('annual') ? 'annual' : 'one-time')));
          let price = 0;
          if (s.displayPrice && typeof s.displayPrice === 'string') {
            const m = s.displayPrice.match(/([0-9]+(?:[.,][0-9]+)?)/);
            if (m) price = parseFloat(m[1].replace(/,/g,'')) || 0;
          }
          if (!price && s.price) price = Number(s.price) || 0;
          const item = {
            product: productName || (s.productId || 'Unknown product'),
            option: (billing === 'annual' ? 'Annual' : (billing === 'monthly' ? 'Monthly' : (s.option || ''))),
            price: Number(price || 0),
            billing: billing,
            single: !!s.single || false,
            addedAt: new Date().toISOString(),
            quantity: Number(s.quantity || 1)
          };
          addToCart(item);
        } catch (err) { console.warn('importSavedPlans item error', err); }
      });
      try { localStorage.removeItem(SAVED_KEY); } catch(e) {}
    } catch (e) { console.warn('importSavedPlans error', e); }
  })();

  // ---------- Listen for storage changes (sync across tabs) ----------
  window.addEventListener('storage', (e) => { if (e.key === CART_KEY) renderCartSummary(); });

  // ---------- Initialize cart UI ----------
  renderCartSummary();

  // ---------- priceMap (unchanged) ----------
  const priceMap = {
    "All-in-One Setup & Onboarding|Basic|one-time":   "price_1SOIxiANBQOX99HKhcipo0Kw",
    "All-in-One Setup & Onboarding|Premium|one-time": "price_1SOJ3GANBQOX99HKy3Cw42qr",
    "All-in-One Setup & Onboarding|Advanced|one-time":"price_1SOJ5GANBQOX99HKNN2yasP3",
    "Cleanup & Catch-Up|3 months|one-time":  "price_1SOMqCANBQOX99HKsOFctjrf",
    "Cleanup & Catch-Up|6 months|one-time":  "price_1SOMqCANBQOX99HKx5i36dFO",
    "Cleanup & Catch-Up|12+ months|one-time":"price_1SOMqCANBQOX99HKHKCJegu6",
    "Migration Service|Basic|one-time": "price_1SOMmqANBQOX99HKVW52VuDE",
    "Migration Service|Full|one-time":  "price_1SOMmqANBQOX99HKcpCyIQXs",
    "QuickStart — Sessions & Optimization|QuickStart Session|one-time": "price_1SOMkgANBQOX99HKEXn8s4Az",
    "QuickStart — Sessions & Optimization|Workflow Pack|one-time":     "price_1SOMkgANBQOX99HKrPY11AYl",
    "Essential Care|Monthly|monthly": "price_1SOMteANBQOX99HKhyjvN5JA",
    "Essential Care|Annual|annual":   "price_1SOMteANBQOX99HKLmHg8o35",
    "Growth Care|Monthly|monthly":    "price_1SOMvbANBQOX99HKdXuX1AOf",
    "Growth Care|Annual|annual":      "price_1SOMvbANBQOX99HKLEIEDGpE",
    "Premium Care|Monthly|monthly":   "price_1SOMxlANBQOX99HKm4uQLuBK",
    "Premium Care|Annual|annual":     "price_1SOMxlANBQOX99HK48CU6qZu",
    "Simple Start|Monthly|monthly":   "price_1SOGodANBQOX99HKiCITtJ4Z",
    "Simple Start|Annual|annual":     "price_1SOGutANBQOX99HKZ6voFANy",
    "CFO Lite|Monthly|monthly":       "price_CFO_MONTHLY_PLACEHOLDER",
    "CFO Lite|Annual|annual":         "price_CFO_ANNUAL_PLACEHOLDER"
  };

  // ---------- Checkout: create session and redirect ----------
  async function postJsonToEndpoints(body) {
    // try each endpoint in order until one returns ok + JSON or redirect url
    let lastErr = null;
    for (let i = 0; i < CHECKOUT_ENDPOINTS.length; i++) {
      const ep = CHECKOUT_ENDPOINTS[i];
      try {
        const resp = await fetch(ep, {
          method: 'POST',
          credentials: 'same-origin',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body)
        });
        const text = await resp.text().catch(()=>null);
        let data = null;
        try { data = text ? JSON.parse(text) : null; } catch(e) { data = null; }
        if (!resp.ok) {
          lastErr = { endpoint: ep, status: resp.status, body: text };
          // if 405 specifically, try the next endpoint
          continue;
        }
        return { resp, data, text, endpoint: ep };
      } catch (err) {
        lastErr = err;
        continue;
      }
    }
    throw lastErr || new Error('All endpoints failed');
  }

  async function checkoutCart() {
    if (window.__creatingCheckout) { console.warn('checkout already in progress — ignoring duplicate call'); return; }
    window.__creatingCheckout = true;
    let origText = null;
    try {
      const cart = readCart();
      if (!cart || cart.length === 0) { createToast('Your cart is empty. Add items before checkout.', { duration: 2400 }); return; }

      const built = cart.map(it => {
        const optionLabel = it.option || (it.billing === 'annual' ? 'Annual' : (it.billing === 'monthly' ? 'Monthly' : ''));
        const key = `${it.product}|${optionLabel}|${it.billing || 'one-time'}`;
        const priceId = priceMap[key] || null;
        return {
          priceKey: priceId ? undefined : key,
          priceId: priceId || undefined,
          key,
          quantity: Number(it.quantity || 1),
          label: it.product,
          unit_amount: Number(it.price || 0),
          original: it
        };
      });

      if (!built.length) { createToast('No valid items to checkout.', { duration: 2400 }); return; }

      const chkBtnEl = document.getElementById('checkoutBtn');
      origText = chkBtnEl ? (chkBtnEl.innerText || chkBtnEl.textContent) : null;
      if (chkBtnEl) { chkBtnEl.disabled = true; chkBtnEl.innerText = 'Starting…'; chkBtnEl.classList && chkBtnEl.classList.add('btn-loading'); }

      const payload = {
        cart: cart,
        lineItems: built.map(b => ({
          priceId: b.priceId,
          priceKey: b.key,
          quantity: b.quantity,
          label: b.label,
          unit_amount: b.unit_amount
        }))
      };

      const result = await postJsonToEndpoints(payload);
      const { resp, data, text } = result || {};
      if (!resp) { throw new Error('No response from checkout endpoints'); }

      if (!resp.ok) {
        console.error('create-checkout-session failed', resp.status, text);
        createToast('Failed to start checkout: ' + (data && data.error ? data.error : ('status ' + resp.status)), { duration: 5000 });
        return;
      }

      const url = (data && (data.url || data.checkoutUrl || data.redirect)) ? (data.url || data.checkoutUrl || data.redirect) : null;
      if (!url) {
        // if server returned sessionId instead, attempt to build Stripe redirect (server should supply URL ideally)
        if (data && data.sessionId && typeof Stripe === 'function') {
          try {
            const stripe = Stripe(data.publishableKey || window.STRIPE_PUBLISHABLE_KEY || '');
            if (stripe) { await stripe.redirectToCheckout({ sessionId: data.sessionId }); return; }
          } catch (e) { console.warn('stripe redirectToCheckout failed', e); }
        }
        console.warn('Server returned success but no url field', data);
        createToast('Server did not return a checkout URL. See console for details.', { duration: 6000 });
        return;
      }

      // perform redirect
      window.location.href = url;
    } catch (err) {
      console.error('checkoutCart error', err);
      const msg = (err && err.message) ? err.message : String(err);
      createToast('Failed to start checkout: ' + msg, { duration: 6000 });
    } finally {
      setTimeout(() => {
        window.__creatingCheckout = false;
        const chkBtn = document.getElementById('checkoutBtn');
        if (chkBtn) {
          try { chkBtn.disabled = false; chkBtn.innerText = origText || 'Checkout'; chkBtn.classList && chkBtn.classList.remove('btn-loading'); } catch(e) {}
        }
      }, 700);
    }
  }
  window.checkoutCart = checkoutCart;

  // wire clear/checkout buttons safely
  const clearBtn = document.getElementById('clearCartBtn');
  if (clearBtn) clearBtn.addEventListener('click', () => { if (confirm('Clear cart?')) clearCart(); });
  const chkBtn = document.getElementById('checkoutBtn');
  if (chkBtn) chkBtn.addEventListener('click', checkoutCart);

  // ---------- UI helpers (price display, cards sync) ----------
  function updateCardPriceDisplay(card, priceValue, suffixHtml) {
    if (!card) return;
    const priceEl = card.querySelector('.fs-3.fw-bold') || card.querySelector('.fs-3') || card.querySelector('h4');
    if (!priceEl) return;
    const p = (typeof priceValue === 'string' && priceValue.trim() !== '') ? Number(String(priceValue).replace(/[^0-9.-]/g,'')) : Number(priceValue || 0);
    if (Number.isNaN(p)) { priceEl.innerHTML = suffixHtml || ''; return; }
    const main = `<span>$${formatNumber(p)}</span>`;
    priceEl.innerHTML = main + (suffixHtml ? ' ' + suffixHtml : '');
  }

  function ensureDiscountNotice(card) {
    if (!card) return null;
    let n = card.querySelector('.discount-notice');
    if (!n) {
      n = document.createElement('div');
      n.className = 'discount-notice';
      n.setAttribute('aria-hidden','true');
      card.style.position = card.style.position || 'relative';
      card.appendChild(n);
    }
    return n;
  }
  function showDiscountNotice(card, text) { const n = ensureDiscountNotice(card); if (!n) return; n.textContent = text || 'Discount active — sign up for services to claim this saving'; n.style.display = 'inline-block'; }
  function hideDiscountNotice(card) { const n = card && card.querySelector ? card.querySelector('.discount-notice') : null; if (n) n.style.display = 'none'; }

  // Tabs setup (safe)
  (function setupTabs(){
    const tabList = document.getElementById('pricingTabs'); if (!tabList) return;
    const tabButtons = Array.from(tabList.querySelectorAll('button[data-bs-target]'));
    const panes = Array.from(document.querySelectorAll('.tab-pane'));
    function activateTab(btn) {
      const target = btn.getAttribute('data-bs-target');
      tabButtons.forEach(b => { b.classList.remove('active'); b.setAttribute('aria-selected','false'); });
      panes.forEach(p => { p.classList.remove('show','active'); });
      btn.classList.add('active'); btn.setAttribute('aria-selected','true');
      const pane = document.querySelector(target); if (pane) pane.classList.add('show','active');
      try { btn.focus(); } catch(e) {}
    }
    tabButtons.forEach(btn => btn.addEventListener('click', e => { e.preventDefault(); activateTab(btn); }));
    const initial = tabList.querySelector('button.active') || tabButtons[0];
    if (initial) activateTab(initial);
  })();

  // recurring card init (keeps top price updated, shows discount pill)
  function initRecurringCard(card) {
    if (!card) return;
    const monthly = Number(card.dataset.monthly || 0);
    const annual = +(monthly * 12).toFixed(2);
    const annualDiscount = +(annual * 0.7).toFixed(2);
    const cta = card.querySelector('.btn-cta');
    if (cta) {
      cta.dataset.price = monthly.toString();
      cta.dataset.annual = annual.toFixed(2);
      cta.dataset.annualDiscount = annualDiscount.toFixed(2);
      cta.dataset.billing = 'monthly';
    }
    updateCardPriceDisplay(card, monthly, '<small>/ month</small>');
    function applySelection() {
      const checked = card.querySelector('input[type="radio"]:checked') || card.querySelector('input[type="checkbox"]:checked');
      let chosenPrice = monthly;
      let suffix = '<small>/ month</small>';
      let showingDiscount = false;
      if (checked) {
        const dp = checked.dataset && checked.dataset.price ? extractPriceFromText(checked.dataset.price) : null;
        if (dp) chosenPrice = dp;
        let labelText = '';
        if (checked.id) {
          const lab = card.querySelector('label[for="' + CSS.escape(checked.id) + '"]');
          if (lab) labelText = lab.textContent || '';
        }
        if (!labelText) {
          const container = checked.closest('.form-check') || checked.parentElement;
          if (container) labelText = container.textContent || '';
        }
        const fromLabel = extractPriceFromText(labelText);
        if (fromLabel) chosenPrice = fromLabel;
        const val = String(checked.value || '').toLowerCase();
        const lblLower = String(labelText || '').toLowerCase();
        if (val.includes('annual') || lblLower.includes('annual') || lblLower.includes('year')) {
          chosenPrice = annualDiscount;
          suffix = '<small>/ year (30% off)</small>';
          showingDiscount = true;
        } else suffix = '<small>/ month</small>';
      }

      updateCardPriceDisplay(card, chosenPrice, suffix);
      const priceEl = card.querySelector('.fs-3.fw-bold, .fs-3, h4');
      if (priceEl) { priceEl.classList.add('price-updated'); safeAnimate(priceEl, [{ transform: 'translateY(6px)', opacity: .6 }, { transform: 'translateY(0)', opacity: 1 }], { duration: 320, easing: 'cubic-bezier(.2,.8,.2,1)' }); setTimeout(() => priceEl.classList.remove('price-updated'), 420); }

      const hasDiscountLine = !!card.querySelector('.discount-line');
      if (hasDiscountLine && showingDiscount) showDiscountNotice(card, 'Discount active — sign up for services to claim this saving');
      else hideDiscountNotice(card);

      if (cta) {
        cta.dataset.billing = showingDiscount ? 'annual' : 'monthly';
        cta.dataset.price = (showingDiscount ? (Number(String(annualDiscount)) || chosenPrice) : chosenPrice).toString();
      }
    }
    qsa('input[type="radio"], input[type="checkbox"]', card).forEach(inp => inp.addEventListener('change', () => setTimeout(applySelection, 8)));
    applySelection();
  }

  qsa('.pricing-item[data-monthly], .card[data-monthly]').forEach(initRecurringCard);

  // one-time radios (setup, cleanup, migration, training)
  function safeDispatch(selector, callback) { qsa(selector).forEach(r => r.addEventListener('change', callback)); }

  safeDispatch('.setup-tier', (ev) => {
    const sel = ev.target || qs('.setup-tier:checked'); if (!sel) return;
    const card = sel.closest('.card') || sel.closest('.pricing-item') || document;
    const price = sel.dataset.price;
    const el = qs('#setupPriceDisplay', card); if (el) el.innerHTML = `<sup>$</sup>${price} <small> / one-time</small>`;
    updateCardPriceDisplay(card, price, '<small> / one-time</small>');
    // little animation for selection change
    try { safeAnimate(card, [{ transform: 'translateY(4px)', opacity: .8 }, { transform: 'translateY(0)', opacity: 1 }], { duration: 220 }); } catch(e) {}
  });

  safeDispatch('.cleanup-option', (ev) => {
    const sel = ev.target || qs('.cleanup-option:checked'); if (!sel) return;
    const card = sel.closest('.card') || sel.closest('.pricing-item') || document;
    const price = sel.dataset.price;
    const el = qs('#cleanupPriceDisplay', card); if (el) el.innerHTML = `<sup>$</sup>${price} <small> (est)</small>`;
    updateCardPriceDisplay(card, price, '<small> (est)</small>');
    try { safeAnimate(card, [{ transform: 'translateY(4px)', opacity: .8 }, { transform: 'translateY(0)', opacity: 1 }], { duration: 220 }); } catch(e) {}
  });

  safeDispatch('.migration-tier', (ev) => {
    const sel = ev.target || qs('.migration-tier:checked'); if (!sel) return;
    const card = sel.closest('.card') || sel.closest('.pricing-item') || document;
    const price = sel.dataset.price;
    const el = qs('#migrationPriceDisplay', card); if (el) el.innerHTML = `<sup>$</sup>${price} <small> / one-time</small>`;
    updateCardPriceDisplay(card, price, '<small> / one-time</small>');
    try { safeAnimate(card, [{ transform: 'translateY(4px)', opacity: .8 }, { transform: 'translateY(0)', opacity: 1 }], { duration: 220 }); } catch(e) {}
  });

  safeDispatch('.training-tier', (ev) => {
    const sel = ev.target || qs('.training-tier:checked'); if (!sel) return;
    const card = sel.closest('.card') || sel.closest('.pricing-item') || document;
    const price = sel.dataset.price;
    const unit = sel.dataset.unit || '';
    const el = qs('#trainingPriceDisplay', card);
    if (el) el.innerHTML = `<sup>$</sup>${price} <small>${unit ? unit : ''}</small>`;
    const suffix = unit ? `<small>${unit}</small>` : '<small></small>';
    updateCardPriceDisplay(card, price, suffix);
    try { safeAnimate(card, [{ transform: 'translateY(4px)', opacity: .8 }, { transform: 'translateY(0)', opacity: 1 }], { duration: 220 }); } catch(e) {}
  });

  // initial dispatch for any pre-checked inputs
  ['.setup-tier:checked', '.cleanup-option:checked', '.migration-tier:checked', '.training-tier:checked']
    .forEach(s => { const el = qs(s); if (el) el.dispatchEvent(new Event('change')); });

  // ---------- mark card added (disables buy buttons) ----------
  function markCardAdded(productName) {
    if (!productName) return;
    const nameLower = String(productName).trim().toLowerCase();

    qsa('.pricing-item').forEach(card => {
      const dp = String(card.dataset.product || card.dataset.plan || '').trim().toLowerCase();
      const titleEl = card.querySelector('.card-title, h3, h4');
      const title = titleEl ? String(titleEl.textContent || '').trim().toLowerCase() : '';
      const matches = nameLower === dp || nameLower === title;

      const buyBtns = card.querySelectorAll('.btn-buy, .stripe-buy, .btn-cta');
      buyBtns.forEach(btn => {
        if (matches) { btn.disabled = true; btn.classList && btn.classList.add('added-disabled'); }
        else { btn.disabled = false; btn.classList && btn.classList.remove('added-disabled'); }
      });
    });
  }

  window.markCardAdded = markCardAdded;

  // ---------- syncCardsWithCart (exposed) ----------
  function syncCardsWithCart() {
    // re-enable everything
    qsa('.pricing-item').forEach(card => {
      const buyBtns = card.querySelectorAll('.btn-buy, .stripe-buy, .btn-cta');
      buyBtns.forEach(b => { try { b.disabled = false; delete b.dataset._saved_disabled; } catch(e){} });
      const checked = card.querySelector('input[type="radio"]:checked, input[type="checkbox"]:checked');
      if (checked) checked.dispatchEvent(new Event('change'));
    });
    // mark items present in cart
    try {
      const parsed = localStorage.getItem(CART_KEY);
      const cart = parsed ? JSON.parse(parsed) : [];
      if (Array.isArray(cart)) cart.forEach(it => markCardAdded(it.product));
    } catch (e) {}
    if (typeof window.renderCartSummary === 'function') window.renderCartSummary();
  }
  window.syncCardsWithCart = syncCardsWithCart;

  // initial sync (if cart pre-populated)
  setTimeout(syncCardsWithCart, 50);

  // expose toast for debugging/consumers
  window.createCartToast = createToast;

})();
</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="assets/js/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/vendor/php-email-form/validate.js"></script>
    <script src="assets/js/vendor/aos/aos.js"></script>
    <script src="assets/js/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/js/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/js/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/js/js/main.js"></script>
    <script src="assets/js/consultationModal.js"></script>
    <script src="assets/js/faq-toggle.js"></script>
</body>

</html>